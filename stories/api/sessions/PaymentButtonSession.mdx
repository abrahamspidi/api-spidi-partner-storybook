import { Meta } from '@storybook/blocks';

<Meta title="API/Sessions/Payment Button Session" />

# Sesión Botón de Pago - Payment Button Session

The Payment Button Session API allows you to create and manage payment sessions for both web and mobile applications. This is the core functionality for initiating payments in the SPIDI platform.

## Overview

Payment Button Sessions provide a secure way to:
- Create payment sessions with customizable parameters
- Handle both web and mobile payment flows
- Track session status and lifecycle
- Integrate with SPIDI's payment processing

## Available Endpoints

### 1. Crear Sesión - Create Session
Create a new payment button session with specified parameters.

### 2. Status Sesión - Session Status
Check the current status of an existing payment session.

## Integration Types

### App Web (Web Application)
For web-based integrations using JavaScript and HTML.

### App Móvil (Mobile Application)
For mobile app integrations using native SDKs or web views.

## Quick Start

### 1. Create a Payment Session

```javascript
const createPaymentSession = async () => {
  const response = await fetch('https://api.spidi.com/v1/sessions', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer YOUR_API_KEY'
    },
    body: JSON.stringify({
      amount: 100.00,
      currency: 'USD',
      description: 'Payment for services',
      return_url: 'https://yourapp.com/success',
      cancel_url: 'https://yourapp.com/cancel'
    })
  });

  return await response.json();
};
```

### 2. Check Session Status

```javascript
const checkSessionStatus = async (sessionId) => {
  const response = await fetch(`https://api.spidi.com/v1/sessions/${sessionId}/status`, {
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY'
    }
  });

  return await response.json();
};
```

## Session Lifecycle

1. **Created**: Session is created and ready for payment
2. **Pending**: Payment is being processed
3. **Completed**: Payment was successful
4. **Failed**: Payment failed or was cancelled
5. **Expired**: Session expired without completion

## Security Considerations

- Always use HTTPS for all API calls
- Store API keys securely (never in client-side code)
- Validate all webhook signatures
- Implement proper error handling
- Use environment-specific API endpoints

## Next Steps

- [Create Session](./CreateSession) - Detailed guide for creating payment sessions
- [Session Status](./SessionStatus) - How to check and handle session status
- [Web Integration](./WebIntegration) - Web application integration guide
- [Mobile Integration](./MobileIntegration) - Mobile application integration guide

## Support

For technical support or questions about payment sessions:
- Check the [Error Handling Guide](../errors/CommonErrors)
- Review [Code Examples](../../examples/PaymentIntegration)
- Contact SPIDI support team
